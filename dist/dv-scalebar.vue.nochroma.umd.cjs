(function(n,h){typeof exports=="object"&&typeof module<"u"?module.exports=h(require("vue"),require("chroma-js")):typeof define=="function"&&define.amd?define(["vue","chroma-js"],h):(n=typeof globalThis<"u"?globalThis:n||self,n.Scalebar=h(n.Vue,n.chroma))})(this,function(n,h){"use strict";/**
 * @license
 * https://github.com/indus/dist/blob/main/dv-scalebar.vue.nochroma.licence.txt
 */const F=["#30123b","#4145ab","#4675ed","#39a2fc","#1bcfd4","#24eca6","#61fc6c","#a4fc3b","#d1e834","#f3c63a","#fe9b2d","#f36315","#d93806","#b11901","#7a0402"],M=[0,.071,.143,.214,.286,.357,.429,.5,.571,.643,.714,.786,.857,.929,1],T=(s,r=0)=>Array.isArray(s)?s:Number.isInteger(s)?Array(s+r).fill(s+r-1).map((e,t)=>t/Math.max(e,1)):(console.warn("expected prop to be 'number[]' or 'int'",s),[]),N=(s,r)=>((r?1-s:s)*100).toFixed(2)+"%",B=(s,r,e=r,t=!1)=>[N(r),s(t?1-e:e).hex()],d=(s,r=!1)=>{if(s===""||s===!0)return!0;if(!s)return;let e=typeof s=="string"||s instanceof String?s.startsWith("[")?JSON.parse(s):s.split(","):Array.isArray(s)?[...s]:[s];return r&&(e=e==null?void 0:e.map(t=>t==""||isNaN(t)?t:+t)),e.length>1?e:e[0]},U=s=>{let{colors:r,labels:e,ticks:t,classes:a,vertical:f,reverse:u,flip:y,before:g,after:c,colorReverse:m,colorMode:O,colorGamma:P,colorCorrectLightness:L,colorPadding:x,colorClass:I,centeredEdgeLabels:b}=s;r=d(r),e=d(e),t=d(t,!0),a=d(a,!0),x=d(x,!0),f=d(f),u=d(u),y=d(y),m=d(m),L=d(L),e===!0&&(Array.isArray(t)?e=[...t]:Array.isArray(a)&&(e=[...a])),u^f&&(Array.isArray(t)&&(t=t.reverse().map(l=>1-l)),Array.isArray(a)&&(a=a.reverse().map(l=>1-l)));let p=null,C=null,S=null,G=null;a===!0&&(t?a=Array.isArray(t)?t:t-1:Array.isArray(e)?a=e==null?void 0:e.length:Array.isArray(r)&&(a=r==null?void 0:r.length));let i;if(r===!0?i=h.scale(F).domain(M):r===void 0?r=["#fff","#000"]:Array.isArray(r)||(r=h.brewer[r]||["#fff",r]),r!==!0&&u^f&&(r=[...r].reverse()),i=i||h.scale(r),O&&(i=i.mode(O)),P&&(i=i.gamma(P)),L&&(i=i.correctLightness()),x&&(i=i.padding(x)),a)switch(I){case"average":i=i.domain([0,1]);break;case"equal":Array.isArray(a)||(a=T(a,1)),i=i.classes([0,...a,1]);break;default:i=i.classes(a);break}if(g===""&&(g=i(f?1:0).hex()),c===""&&(c=i(f?0:1).hex()),!a||Number(a)<=1)C=Array(42).fill(41).map((l,o)=>B(i,o/l,o/l,m));else{let l=T(a,1);if(Array.isArray(l)){let o=l.length-1;C=l.reduce((A,_,k,E)=>{let $=E[k+1],w=(_+$)/2;return k<o&&k&&A.push(B(i,_,w,m)),k<o-1&&A.push(B(i,$,w,m)),A},[]),p=l}}if(t!==void 0){t===!0&&(Array.isArray(p)?t=p:Array.isArray(e)?t=e.length:t=2);let l=T(t);Array.isArray(l)&&(S=l.map(o=>N(o,f)),p=p||l,u^f&&(S=S.reverse()))}if(e!==void 0){if(e===!0)if(p){let o=p.length-(a?1:0);e=Array(o).fill(Math.max(o-1,1)).map((A,_)=>`${parseFloat((_/A).toFixed(2))}`)}else e=["0","1"];Array.isArray(e)||(e=["0",e]),u^f&&Array.isArray(e)&&(e=e.reverse());let l;switch(p&&e.length-p.length){case 0:l=o=>p[o],b=!1;break;case-1:l=o=>(p[o]+p[o+1])/2,b=!0;break;default:e.length>1?(l=o=>o/(e.length-1),b=!1):(l=()=>.5,b=!0);break}G=e.map((o,A)=>[N(f?1-l(A):l(A)),o])}return{stops$:C,ticks$:S,labels$:G,before:g,after:c,vertical:f,klass:`dv-sb${g?" b":""}${c?" a":""}${y?" f":""}${f?" v":" h"}${b?" c":""}`}};let j=0;const q=n.defineComponent({props:{colors:{type:[Boolean,String,Array]},labels:{type:[Boolean,String,Array]},ticks:{type:[Boolean,String,Number,Array]},classes:{type:[Boolean,String,Number,Array]},vertical:{type:Boolean},reverse:{type:Boolean},flip:{type:Boolean},before:{type:String},after:{type:String},colorReverse:{type:Boolean},colorMode:{type:String},colorGamma:{type:Number},colorCorrectLightness:{type:Boolean},colorPadding:{type:[String,Number,Array]},colorClass:{type:String},centeredEdgeLabels:{type:Boolean}},setup(s){const r=j++;return()=>{const{stops$:e,ticks$:t,labels$:a,before:f,after:u,vertical:y,klass:g}=U(s);return n.h("svg",{class:g},[n.h("defs",[n.h("line",{id:`tk${r}`,x1:0,xy:0,x2:y?1:0,y2:y?0:1}),n.h("linearGradient",{id:`lg${r}`,gradientTransform:y?"translate(-1,1) rotate(-90)":null},e==null?void 0:e.map(c=>n.h("stop",{offset:c[0],"stop-color":c[1]})))]),f?n.h("rect",{class:"b",fill:f}):null,n.h("rect",{fill:`url('#lg${r}')`,width:y?null:"100%",height:y?"100%":null}),u?n.h("rect",{class:"a",fill:u}):null,t==null?void 0:t.map(c=>n.h("use",{href:`#tk${r}`,x:y?0:c,y:y?c:0})),a==null?void 0:a.map(c=>n.h("text",{x:y?null:c[0],y:y?c[0]:null},c[1]))])}}});return((s,r)=>{const e=s.__vccOpts||s;for(const[t,a]of r)e[t]=a;return e})(q,[["__scopeId","data-v-fada05ef"]])});
